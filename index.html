<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>SNEBU</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>SNEBU</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Snebu is an efficient incremental snapshot style client/server disk-based backup system for Unix / Linux systems.  Efficiency is provided by transferring only the needed files to complete a given backup set, along with compression and file-level de-duplication.  This de-duplication is effective for any files with the same contents, whether they come from the same backup instance, or are duplicated across past backups, or even across multiple systems.  Therefore you can backup the full OS on multiple servers using only minimal additional storage space.</p></div>
<div class="sect2">
<h3 id="_audience">Audience</h3>
<div class="paragraph"><p>Snebu is for those who either have no current backup strategy, and want to get something going quickly (either to a locally attached external drive, or to some storage on another server), or if you are currently using a simpler backup scheme (such as one of the rsync-based backup methods) and need to have some of the features of the more heavy weight backup systems (such as a compression, de-duplication, backup catalog DB, and scheduled data expiration).</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_downloads_installation">Downloads / Installation</h2>
<div class="sectionbody">
<div class="ulist"><div class="title">Source</div><ul>
<li>
<p>
Download <a href="https://github.com/derekp7/snebu/archive/v1.02/snebu-v1.02.tar.gz">snebu-1.02.tar.gz</a>
</p>
</li>
<li>
<p>
Extract the tar file, and run make / make install
</p>
<div class="listingblock">
<div class="content">
<pre><code>tar -zxvf snebu-1.02.tar.gz
cd snebu-1.02
make
make install</code></pre>
</div></div>
</li>
</ul></div>
<div class="ulist"><div class="title">RPM (Fedora / RHEL)</div><ul>
<li>
<p>
Download <a href="https://github.com/derekp7/snebu/releases/download/v1.02/snebu-1.02-1.src.rpm">snebu-1.02-1.src.rpm</a>
</p>
</li>
<li>
<p>
Make sure you have the prerequisite packages installed
</p>
<div class="listingblock">
<div class="content">
<pre><code>yum install rpm-build lzo-devel openssl-devel sqlite-devel</code></pre>
</div></div>
</li>
<li>
<p>
Build and install the binary RPM
</p>
<div class="listingblock">
<div class="content">
<pre><code>rpmbuild --rebuild snebu-1.02-1.src.rpm
yum install snebu-1.02-1.rpm</code></pre>
</div></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_features">Features</h2>
<div class="sectionbody">
<div class="paragraph"><p>Benefits:</p></div>
<div class="ulist"><ul>
<li>
<p>
Easy to set up.  There system consists of two programs:<br />
<code>snebu-client</code> - This is a simple shell script for interacting with the backend process, along with gathering the files to include in a given backup set.<br />
<code>snebu</code>&#8201;&#8212;&#8201;This is the backend process which stores backup files in a disk-based vault, maintaining metadata about the files and backup sets in an SQLite-based backup catalog.
</p>
<div class="paragraph"><p>There are no complicated daemons to configure, or heavy database systems that need to be installed.  All the core logic is self-contained in the snebu binary.
* Suitable for backing up a single system to an attached external disk, backing up to a separate network server, or backing up a number of hosts with backups initiated from the central backup server.</p></div>
</li>
<li>
<p>
No client software installation required.  If backups are initiated from a central backup server, then communications to the clients are preformed over SSH.  The only requirements are that the backup account on the server is permitted appropriate access to the client (via ssh keys), and the client have the minimal versions of GNU find and tar installed (this is only a concern with ancient Linux installations, or Unix systems).
</p>
</li>
<li>
<p>
Works similar to rsync-based backup tools (by providing snapshot incremental-forever backups), but provides compression and a self-contained database-backed (SQLite) backup catalog.  One of the many benefits of having a separate backup catalog is this allows the backend to execute under a regular (non-root) utility account.
</p>
</li>
<li>
<p>
File-level de-duplication is supported, including de-duplication of files across backup sets, and across multiple backup clients.
</p>
</li>
<li>
<p>
Built using standard tools and protocols.  File metadata gathering is provided by the <code>find</code> command (GNU find is required), files are transfered using <code>tar</code> format, the backup catalog is in an SQLite database file, and files are stored in the disk-based vault compressed with the LZO library, and compatible with the <code>lzop</code> compression program.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start_guide">Quick-start guide</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_concepts">Concepts</h3>
<div class="paragraph"><p>The Snebu backup system is composed of a backend process, <code>snebu</code>, and a front-end client called <code>snebu-client</code>.  The client gathers a list of files to back up (using the <code>find</code> command), sends this list to the backend, and gets back a list of files that are needed to complete an incremental backup.  These files are then sent to the backend using the Unix <code>tar</code> format.</p></div>
<div class="paragraph"><p>Backups are stored in backup sets.  A backup set is uniquely identified by the backup name (typically the host name getting backed up), and a datestamp in the form of a Unix time_t value (essentially, a count of the number of seconds since Jan 1, 1970).  This value functions as a serial number.</p></div>
<div class="paragraph"><p>Each backup set has a retention schedule attached to it, specified by the <code>-r</code> flag.  The retention schedule is used by the expiration process to, for example, expire all daily backups older than 10 days, or all monthly backups older than 6 months.  Anything can be used for for a schedule name, but typical values are <code>daily</code>, <code>weekly</code>, <code>monthly</code>, <code>yearly</code>, and <code>archive</code>.  If not specified, then the <code>snebu-client</code> script will automatically pick a retention schedule based on the date (Sunday through Friday are daily, Saturday is weekly, and the 1st of the month is monthly).</p></div>
<div class="paragraph"><p>When a backup is requested, the backend will determine which files it already has (by comparing meta data such as file name, size, last modification time, and various other attributes).  A list of files that are already on the backup server is added to the current backup set.  The remaining files are then requested, and are added to the backup set when they are received.</p></div>
<div class="paragraph"><p>File contents are stored and referenced by using the SHA1 hash of the file contents.  Therefore, file level de-duplication is achieved across all backups stored on the backup server.  In addition, files are stored compressed in an lzop compatible format.  This allows for recovery of files even outside of the backup utility.</p></div>
</div>
<div class="sect2">
<h3 id="_setting_up_a_local_backup">Setting up a local backup</h3>
<div class="paragraph"><p>This procedure assumes that both <code>snebu</code> and <code>snebu-client</code> are installed, and you will be backing up to a drive that is mounted under /media/backups.  These steps will be run as the root user.  In the examples, the host name that is getting backed up is called <code>zeus</code>.  The backup retention schedules are automatically determined in these examples (use <code>-r</code> to override)</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Create a file <code>/etc/snebu.conf</code> with the following:
</p>
<div class="listingblock">
<div class="content">
<pre><code>meta=/media/backups/meta
vault=/media/backups/vault</code></pre>
</div></div>
<div class="paragraph"><p>The meta directory is where the backup catalog is stored (in an SQLite DB).  The vault directory contains all the backup file contents.</p></div>
</li>
<li>
<p>
Create the directories from the previous step:
</p>
<div class="listingblock">
<div class="content">
<pre><code>mkdir -p /media/backups/meta
mkdir -p /media/backups/vault</code></pre>
</div></div>
</li>
<li>
<p>
Create a file <code>/etc/snebu-client.conf</code> with the following:
</p>
<div class="listingblock">
<div class="content">
<pre><code>EXCLUDE=( /tmp /var/tmp /mnt /media/backups )</code></pre>
</div></div>
<div class="paragraph"><p>By default, the files to be backed up included all mounted Linux filesystems of the types ext2, ext3, ext4, btrfs, xfs.  This is the same as specifying the following line in the <code>snebu-client.conf</code> file:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>INCLUDE=( $(mount |egrep "ext[234]|btrfs" |awk '{print $3}') )</code></pre>
</div></div>
<div class="paragraph"><p>If you want to list specific directories to backup, list them in an INCLUDE line in the <code>/etc/snebu-client.conf</code> file:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>INCLUDE=( /dir1 /dir2 /dir3 )</code></pre>
</div></div>
<div class="paragraph"><p>Or, if you want to add to the default include:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>INCLUDE=( "${INCLUDE[@]}" /dir1 /dir2 /dir3 )</code></pre>
</div></div>
</li>
<li>
<p>
Run a test backup:
</p>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client backup -v</code></pre>
</div></div>
<div class="paragraph"><p>Note, you can also override the default INCLUDE list on the <code>snebu-client</code> command line:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client backup -v /dir1 /dir2</code></pre>
</div></div>
<div class="paragraph"><p>See the <code>snebu-client</code> detailed documentation for the list of available parameters.  Specifically, look at the <code>-r</code> (retention schedule), and <code>-n</code> (backup name) parameters.
. Once the backup is completed, you can use the following to list the backups:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client listbackups -v</code></pre>
</div></div>
<div class="paragraph"><p>Which should output the names of the backups that are available:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>zeus
    1389677695 / daily / Mon Jan 13 23:34:55 2014</code></pre>
</div></div>
</li>
<li>
<p>
To get a list of files that are included:
</p>
<div class="listingblock">
<div class="content">
<pre><code>    snebu-client listbackups --name zeus --datestamp 1389677695 |more</code></pre>
</div></div>
</li>
<li>
<p>
To restore a given file, pick one from the list generated in the step above, and:
</p>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client restore --name zeus --datestamp 1389677695 '/path/to/file'</code></pre>
</div></div>
<div class="paragraph"><p>Or, to restore a directory,</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client restore --name zeus --datestamp 1389677695 '/path/to/directory/*'</code></pre>
</div></div>
<div class="paragraph"><p>This will by default place the files starting in the directory you are currently sitting in.  So, if you are in /tmp, and restore /home/bob/resume.txt, it will be placed in /tmp/home/bob/resume.txt.  See the detailed documentation section for additional parameters, such as <code>-C</code> which will specify an alternate target directory, or <code>--graft</code> which will allow you to rename parts of the file path.</p></div>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_backing_up_to_a_remote_server">Backing up to a remote server</h3>
<div class="paragraph"><p>When backing up to a remote server, it is preferable to use a non-privliged user account, such as <code>backup</code>, instead of <code>root</code>.  In this section, the backup server will be called <code>jupiter</code>, and the client is <code>zeus</code>.  The backup server will have the target backup media mounted under /media/backups, which will be owned by <code>backup</code>.  The program <code>snebu</code> is assumed to be installed on <code>jupiter</code>, and the <code>snebu-client</code> script is on the client <code>zeus</code>.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Create a backup user:
</p>
<div class="listingblock">
<div class="content">
<pre><code>useradd backup
passwd backup</code></pre>
</div></div>
</li>
<li>
<p>
Create a file <code>/etc/snebu.conf</code> with the following:
</p>
<div class="listingblock">
<div class="content">
<pre><code>meta=/media/backups/meta
vault=/media/backups/vault</code></pre>
</div></div>
</li>
<li>
<p>
After mounting the backup media, create the directories from the previous step, and make everything owned by backup:
</p>
<div class="listingblock">
<div class="content">
<pre><code>mkdir -p /media/backups/meta
mkdir -p /media/backups/vault
chown -R backup /media/backups</code></pre>
</div></div>
</li>
<li>
<p>
On the client (<code>zeus</code>), create an ssh key pair if one doesn&#8217;t exist for the root user, and copy it to the <code>backup</code> user&#8217;s authorized-keys file on <code>jupiter</code>:
</p>
<div class="listingblock">
<div class="content">
<pre><code>ssh-keygen -t rsa -N ""
ssh-copy-id backup@jupiter</code></pre>
</div></div>
</li>
<li>
<p>
On the client, create the <code>/etc/snebu-client.conf</code> file with proper INCLUDE and EXCLUDE parameters, as specified in the previous (local backup) section.
</p>
</li>
<li>
<p>
Make sure you can (as root on <code>zeus</code>) ssh into the backup user on <code>jupiter</code>
</p>
<div class="listingblock">
<div class="content">
<pre><code>ssh backup@jupiter uname -a</code></pre>
</div></div>
</li>
<li>
<p>
Run a test backup as before, but with an additional parameter:
</p>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client backup --backup-server jupiter -v</code></pre>
</div></div>
<div class="paragraph"><p>The --backup-server parameter will also apply to all the other comands, such as listbackups and restore.  An alternative to specifying this each time is to add the following to <code>/etc/snebu-client.conf</code>:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>bksvrname=jupiter</code></pre>
</div></div>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_backing_up_remote_clients_from_a_backup_server">Backing up remote clients from a backup server</h3>
<div class="paragraph"><p>If you have a number of systems to back up, it may be better to initiate all backups from the backup server.  In this model, the <code>backup</code> user account on the backup server will need SSH permissions to access root on the clients.  This may be preferable, as it avoids having to give each client remote access to the backup server.  However, that means the clients have to trust the backup server with root access.  The good part, though, is there is nothing to install on the clients, other than inserting a key into root&#8217;s authorized_keys file.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Set up the backup server, <code>jupiter</code> as discussed in the previous section (steps 1 through 3)
</p>
</li>
<li>
<p>
Also, on the server (<code>jupiter</code>), create an SSH key pair for the <code>backup</code> user
</p>
<div class="listingblock">
<div class="content">
<pre><code>ssh-keygen -t rsa -N ""</code></pre>
</div></div>
</li>
<li>
<p>
Copy the public key file to the clients to be backed up.  Newer versions of OpenSSH include a utility to make this easier:
</p>
<div class="listingblock">
<div class="content">
<pre><code>ssh-copy-id root@zeus</code></pre>
</div></div>
</li>
<li>
<p>
Initiate a test backup from the <code>backup</code> user on <code>jupiter</code>:
</p>
<div class="listingblock">
<div class="content">
<pre><code>snebu-client backup --remote-client zeus -v</code></pre>
</div></div>
</li>
</ol></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_daily_and_periodic_maintenance_tasks">Daily and periodic maintenance tasks</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_expiring_old_backups">Expiring old backups</h3>
<div class="paragraph"><p>Periodically cleaning out old backups is essential for keeping the target storage device from running out of space.  Typical data retention schedules are:</p></div>
<div class="ulist"><ul>
<li>
<p>
daily&#8201;&#8212;&#8201;keep all daily backups for 2 weeks
</p>
</li>
<li>
<p>
weekly&#8201;&#8212;&#8201;keep all weekly (Saturday) backups for 6 weeks
</p>
</li>
<li>
<p>
monthly&#8201;&#8212;&#8201;keep all monthly backups for 12 months
</p>
</li>
</ul></div>
<div class="paragraph"><p>To accomplish this, run the following commands on the backup server:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu expire -a 14 -r daily
snebu expire -a 42 -r weekly
snebu expire -a 365 -r monthly</code></pre>
</div></div>
<div class="paragraph"><p>Note, that there is a safety valve built into the expire command, where it will keep (by default) the most recent 3 backup sets for a given system.  This can be adjusted with the <code>-m</code> flag (i.e., <code>-m 7</code> will keep the most recent 7 backups, or <code>-m 0</code> disables this safety check).</p></div>
<div class="paragraph"><p>Another form of the expire command will remove a given backup set, useful if you have a partial or a redundant backup that needs to be cleaned out:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu expire -n name -d datestamp</code></pre>
</div></div>
<div class="paragraph"><p>After the expiration jobs are finished (which removes the backups from the backup catalog), you will need to remove the actual file contents from the vault:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>snebu purge</code></pre>
</div></div>
<div class="paragraph"><p>The purge process can take some time to execute, so typically it would be run on a weekly basis, and the expire jobs run daily after the backups have completed.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_usage">Advanced usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_creating_a_custom_snebu_client_script">Creating a custom snebu-client script</h3>
<div class="paragraph"><p>Typically, direct usage of the <code>snebu</code> command is used for maintenance purposes.  Submitting backups and restoring is driven by the snebu-client command.  However, if needed, you can create a custom client for advanced purposes (such as performing live database backups, which typically involve placing the DB in backup mode, and querying the DB for which files to back up).  The process of submitting a backup requires two parts:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>snebu newbackup</code>
</p>
<div class="paragraph"><p>This subcommand expects an input list of files as a tab-delimited list consisting of:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>File Type, Mode, Device, Inode, Owner, Owner#, Group, Group#, Size, SHA1, Inode Mod Time, File Mod Date, Filename, Symlink Target</code></pre>
</div></div>
<div class="paragraph"><p>This list can be generated with GNU find command, with the following <code>-printf</code> arguments added:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>\( -type f -o -type d \) \
    -printf "%y\t%#m\t%D\t%i\t%u\t%U\t%g\t%G\t%s\t0\t%C@\t%T@\t%p\0" \
    -o -type l \
    -printf "%y\t%#m\t%D\t%i\t%u\t%U\t%g\t%G\t%s\t0\t%C@\t%T@\t%p\0%l\0"</code></pre>
</div></div>
<div class="paragraph"><p>(Note, that currently the SHA1 field (field number 10) isn&#8217;t used, so the above puts a 0 as a placeholder.  This is intended to be an additional indicator of if a file needs to be transfered to the backup server&#8217;s vault, or if it is already there.)</p></div>
</li>
<li>
<p>
<code>snebu submitfiles</code>
</p>
<div class="paragraph"><p>The output of the <code>snebu newbackup</code> command is a list of files that need to be backed up to complete the backup set (anything not on this list is already on the backup server, and gets linked to the current backup set).  This list is then used to generate a <code>tar</code> file, which gets submitted to the submitfiles target as standard input.</p></div>
<div class="paragraph"><p>See the detailed documentation section for additional command line arguments that are required.  Also, the included snebu-client shell script can be referenced for more details.</p></div>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_changing_file_locations">Changing file locations</h3>
<div class="paragraph"><p>One parameter to <code>snebu-client</code> (or <code>snebu</code>, if writing your own client) is the <code>--graft</code> option.  This allows you to re-write the directory path from one location to another.  This is useful when backing up a filesystem snapshot.  If the snapshot of <code>/srv/database</code> is mounted under <code>/mnt/snapshots/database</code>, you can specify <code>--graft /mnt/snapshots/database/=/srv/database/</code> so that the backup will record the file locations as if they were backed up under their original location.</p></div>
<div class="paragraph"><p>Another usage for <code>--graft</code> is when restoring a single file to a different location.  For example: <code>--graft /home/bob/budget.doc=/home/bob/restore/budget.doc</code> will allow restoring the file without overwriting the version that is currently in place.</p></div>
</div>
<div class="sect2">
<h3 id="_forcing_a_full_backup">Forcing a full backup</h3>
<div class="paragraph"><p>Snebu uses the file meta data (file name, last mod date, size, permissions, etc.) to determine if a file has been modified since the last backup.  If a file gets modified, keeps the same size, and the mod date is manually set to the original, this can cause the file to be skipped during incremental backups.  Therefore, it may be desirable to periodically force a full backup with the <code>-f</code> flag.  This will cause all included files to get transfered, although de-duplication is still accomplished on the back end.  The main drawback of <code>-f</code> is that it increases the backup time and network usage.</p></div>
</div>
<div class="sect2">
<h3 id="_plugins">Plugins</h3>
<div class="paragraph"><p>A plugin architecture is currently under development, which allows the <code>snebu-client</code> script to perform additional steps before and after a backup.  This can be used to create and mount snapshots of file systems, or to put a database into backup mode.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_reference">Command reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_snebu_client_br">snebu-client<br /></h3>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu-client [ subcommand ] [ options ]
 snebu-client is the client front end for snebu.  Use it to easily
 back up a local or remote host, to either local a local storage
 device, or to a remote backup server.  Use it with one of the
 following subcommands.

 Sub commands are as follows:
    backup  [ -n backupname ] [ -d datestamp ] [ -r schedule ]

    restore [ -n backupname ] [ -d datestamp ]

    listbackups [ -n backupname [ -d datestamp ]] [ file_list... ]

    help [subcommand]</code></pre>
</div></div>
<div class="sect3">
<h4 id="_snebu_client_backup">snebu-client backup</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu-client backup [ -n backupname ] [ -d datestamp ] [ -r schedule ]
    [ file-list ]
 Initiates a system backup.  By default, it will back up the local
 host to a local snebu install.  You can also use this command to back
 up to a remote backup server, back up a remote host to either a local
 snebu instalation, or back up a remote host to another remote backup
 server, depending on which options are chosen.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu-client.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.

 -r, --retention schedule   Retention schedule for this backup set.  Typical
                            values are "daily", "weekly", "monthly", "yearly".

     --remote-client hostname
                            Host name / IP address of remote server.  Used to
                            backup a remote server to local host.

     --backup-server hostname
                            Host name / IP address of backup server.  Used to
                            backup to a remote server.

 -f, --force-full           Force a full backup

 -C, --changedir path       Changes to the given directory path before
                            backing up or restoring.

     --graft /path/name/=/new/name/
                            Re-write path names beginning with "/path/name/"
                            to "/new/name/"

     --plugin scriptname    Specifies an optional plug in script.  Usually
                            used to perform database-specific operations
                            (such as enabling hot backup mode) for systems
                            with a DB installed.

 [ file-list ]              List of files to backup -- overrides default</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_client_restore">snebu-client restore</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu-client restore [ -n backupname ] [ -d datestamp ] [ file-list ]
 Restores a given backup session identified by "-n" and "-d"
 parameters.  Use the "listbackups" subcommand to get a list of
 available backup sessions.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu-client.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.

 -C, --changedir path       Changes to the given directory path before
                            backing up or restoring.

     --remote-client hostname
                            Host name / IP address of remote server.  Used to
                            backup a remote server to local host.

     --backup-server hostname
                            Host name / IP address of backup server.  Used to
                            backup to a remote server.

 [ file-list ]              List of files to restore.  Defaults to all.</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_client_listbackups">snebu-client listbackups</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu-client listbackups [ -n hostname [ -d datestamp ]] [ file_list... ]
 With no arguments specified, "listbackups" will return a list of all
 systems that are contained in the backup catalog.  Otherwise, when
 specifying the -n parameter, a list of backup sets for that host is
 returned.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu-client.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_snebu">snebu</h3>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu [ subcommand ] [ options ]
  where "subcommand" is one of the following:
    newbackup -n backupname -d datestamp -r schedule

    submitfiles -n backupname -d datestamp

    restore -n backupname -d datestamp [ file_list... ]

    listbackups [ -n hostname [ -d datestamp ]] [ file_list... ]

    expire [ -n hostname -d datestamp ] or [ -a days -r schedule [ -n hostname ]]

    purge

    help [ subcommand ]

 The "snebu" command is a backup tool which manages storing data from
 backup sessions on disk-based storage, utilizing a simple database
 for tracking backup sets and meta data.  Typically it is called via a
 front end script (such as the included "snebu-client" shell script).
 Documentation is provided here if you need to create a custom backup
 client script.  The subcommands are listed below along with the most
 common options.  Details on each command are given in each command's
 help section.</code></pre>
</div></div>
<div class="sect3">
<h4 id="_snebu_newbackup">snebu newbackup</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu newbackup -n backupname -d datestamp -r schedule
 The "newbackup" command creates a new backup set, by consuming a
 tab-delimited list of file names (along with associated meta data) to
 include in the backup.  It then compares this list to the backup
 catalog database to determine which files are new, and which ones are
 already contained on the backup media.  A list of new / changed files
 is returned, which can then be passed along to "tar" to generate a

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.

 -r, --retention schedule   Retention schedule for this backup set.  Typical
                            values are "daily", "weekly", "monthly", "yearly".

 -T, --files-from FILE      Read list of filenames (with meta data) to backup
                            from the named file, instead of standard input.

     --null                 Inbound file backup list (-T, or standard input)
                            is null terminated

     --not-null             Inbound file backup list (-T, or standard input)
                            is newline terminated

     --null-output          Generate include-file-list with null terminated
                            lines.

     --not-null-output      Generate include-file-list with newline
                            terminated lines.

 -f, --force-full           Force a full backup

     --graft /path/name/=/new/name/
                            Re-write path names beginning with "/path/name/"
                            to "/new/name/"

 -v,                        Verbose output</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_submitfiles">snebu submitfiles</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu submitfiles -n backupname -d datestamp
 The "submitfiles" command is called after newbackup, and is used to
 submit a tar file containing the list of filest that newbackup
 returned.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.

 -v,                        Verbose output</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_restore">snebu restore</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu restore -n backupname -d datestamp [ file_list... ]
 Generates a tar file containing files from a given backup set.  Pipe
 the output of this command into a tar command to actually restore
 files.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.
     --graft /path/name/=/new/name/
                            Re-write path names beginning with "/path/name/"
                            to "/new/name/"</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_listbackups">snebu listbackups</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu listbackups [ -n hostname [ -d datestamp ]] [ file_list... ]
 With no arguments specified, "listbackups" will return a list of all
 systems that are contained in the backup catalog.  Otherwise, when
 specifying the -n parameter, a list of backup sets for that host is
 returned.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_expire">snebu expire</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu expire [ -n hostname -d datestamp ] or [ -a days -r schedule [ -n hostname ]]
 Removes backup sessions from the snebu backup catalog database.  A
 specific backup session can be purged by providing the "-n" and "-d"
 options, or all backups that are part of a given retention schedule
 (specified with "-r", and optionally from a given host, with the "-n"
 option) that are older than a given number of days ("-a") are removed.

Options:
 -c, --config config_file   Name of the configuration file.  Default is
                            /etc/snebu.conf.

 -n, --name backupname      Name of the backup.  Usually set to the server
                            name that you are backing up.

 -d, --date datestamp       Date stamp for this backup set.  The format is in
                            time_t format, sames as the output of the "date
                            +%s" command.

 -r, --retention schedule   Retention schedule for this backup set.  Typical
                            values are "daily", "weekly", "monthly", "yearly".
 -a, --age #days            Expire backups older than #days.

 -m, --min-keep #           When expiring with the "-a" flag, keep at least
                            this many of the most recent backups for a given
                            hostname/retention level.</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_snebu_purge">snebu purge</h4>
<div class="listingblock">
<div class="content">
<pre><code>Usage: snebu purge
 Permanently removes files from disk storage that are no longer
 referenced by any backups. Run this command after running "snebu
 expire".</code></pre>
</div></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact_info">Contact info</h2>
<div class="sectionbody">
<div class="paragraph"><p>If you find any bugs or have feature requests, you can submit them using Github&#8217;s <a href="https://github.com/derekp7/snebu/issues">issue tracker</a>.  Note, that this requires a Github account to post to.</p></div>
<div class="paragraph"><p>There is also a Google Group at <a href="http://groups.google.com/d/forum/snebu">http://groups.google.com/d/forum/snebu</a> which is also linked to a mail list: <a href="mailto:snebu@googlegroups.com">snebu@googlegroups.com</a>, where you can post questions or feature requests.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-08-14 13:46:15 CDT
</div>
</div>
         <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38165670-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>
</body>
</html>
